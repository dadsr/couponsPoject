<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (22) on Tue Aug 13 22:00:02 IDT 2024 -->
<title>CouponsDBDAO</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2024-08-13">
<meta name="description" content="declaration: package: DAO, class: CouponsDBDAO">
<meta name="generator" content="javadoc/ClassWriter">
<link rel="stylesheet" type="text/css" href="../resource-files/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../resource-files/stylesheet.css" title="Style">
<script type="text/javascript" src="../script-files/script.js"></script>
<script type="text/javascript" src="../script-files/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../script-files/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../index-files/index-1.html">Index</a></li>
<li><a href="../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">DAO</a></div>
<h1 title="Class CouponsDBDAO" class="title">Class CouponsDBDAO</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">DAO.CouponsDBDAO</div>
</div>
<section class="class-description" id="class-description">
<div class="horizontal-scroll">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">CouponsDBDAO</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></span></div>
</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>private <a href="ConnectionPool.html" title="class in DAO">ConnectionPool</a></code></div>
<div class="col-second even-row-color"><code><a href="#connectionPool" class="member-name-link">connectionPool</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code>protected static final org.apache.logging.log4j.Logger</code></div>
<div class="col-second odd-row-color"><code><a href="#logger" class="member-name-link">logger</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">CouponsDBDAO</a>()</code></div>
<div class="col-last even-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addCoupon(BEANS.Coupon)" class="member-name-link">addCoupon</a><wbr>(<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&nbsp;coupon)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Adds a new coupon to the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#addCouponPurchase(int,int)" class="member-name-link">addCouponPurchase</a><wbr>(int&nbsp;customerId,
 int&nbsp;couponID)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Records a coupon purchase by a customer and updates the coupon's amount in the database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a><wbr>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allCouponsByCompany(int)" class="member-name-link">allCouponsByCompany</a><wbr>(int&nbsp;companyId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all coupons associated with a specific company from the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a><wbr>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allCouponsByCompanyAndCategory(int,int)" class="member-name-link">allCouponsByCompanyAndCategory</a><wbr>(int&nbsp;companyId,
 int&nbsp;categoryId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all coupons for a specific company that belong to a given category.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a><wbr>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allCouponsByCompanyAndMaxPrice(int,double)" class="member-name-link">allCouponsByCompanyAndMaxPrice</a><wbr>(int&nbsp;companyId,
 double&nbsp;maxPrice)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all coupons for a specific company that are priced at or below a given maximum price.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a><wbr>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allCouponsByCustomer(int)" class="member-name-link">allCouponsByCustomer</a><wbr>(int&nbsp;customerId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all coupons associated with a specific customer from the database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a><wbr>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allCouponsByCustomerAndCategory(int,int)" class="member-name-link">allCouponsByCustomerAndCategory</a><wbr>(int&nbsp;customerId,
 int&nbsp;categoryId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all coupons purchased by a specific customer that belong to a given category.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a><wbr>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#allCouponsByCustomerAndMaxPrice(int,double)" class="member-name-link">allCouponsByCustomerAndMaxPrice</a><wbr>(int&nbsp;customerId,
 double&nbsp;maxPrice)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all coupons purchased by a specific customer that are priced below or equal to a given maximum price.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#checkCouponPurchase(int,int)" class="member-name-link">checkCouponPurchase</a><wbr>(int&nbsp;customerID,
 int&nbsp;couponID)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks if a specific coupon has been purchased by a customer.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#couponToStatement(BEANS.Coupon,java.sql.PreparedStatement)" class="member-name-link">couponToStatement</a><wbr>(<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&nbsp;coupon,
 <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/PreparedStatement.html" title="class or interface in java.sql" class="external-link">PreparedStatement</a>&nbsp;statement)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Populates a <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/PreparedStatement.html" title="class or interface in java.sql" class="external-link"><code>PreparedStatement</code></a> with the values from a <a href="../BEANS/Coupon.html" title="class in BEANS"><code>Coupon</code></a> object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteCoupon(int)" class="member-name-link">deleteCoupon</a><wbr>(int&nbsp;couponID)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes a coupon from the database.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteCouponPurchase(int,int)" class="member-name-link">deleteCouponPurchase</a><wbr>(int&nbsp;customerId,
 int&nbsp;couponID)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes a coupon purchase record by a customer and updates the coupon's amount in the database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteCouponsByCompany(int)" class="member-name-link">deleteCouponsByCompany</a><wbr>(int&nbsp;companyId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes all coupons associated with a specified company.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deleteCouponsByExpirationDate()" class="member-name-link">deleteCouponsByExpirationDate</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes expired coupons from the database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deletePurchasesByCompany(int)" class="member-name-link">deletePurchasesByCompany</a><wbr>(int&nbsp;companyId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes all coupon purchase records associated with coupons from a specified company.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deletePurchasesByCoupon(int)" class="member-name-link">deletePurchasesByCoupon</a><wbr>(int&nbsp;couponID)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes all coupon purchases associated with a specified coupon.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#deletePurchasesByCustomer(int)" class="member-name-link">deletePurchasesByCustomer</a><wbr>(int&nbsp;customerID)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Deletes all coupon purchases made by a specified customer and updates the coupon amounts accordingly.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a><wbr>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getAllCoupons()" class="member-name-link">getAllCoupons</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves all coupons from the database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getSelectedCoupon(int)" class="member-name-link">getSelectedCoupon</a><wbr>(int&nbsp;couponID)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Retrieves a specific coupon from the database based on its ID.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#resultSetToCoupon(java.sql.ResultSet)" class="member-name-link">resultSetToCoupon</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;resultSet)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Converts a <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link"><code>ResultSet</code></a> object into a <a href="../BEANS/Coupon.html" title="class in BEANS"><code>Coupon</code></a> object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateCoupon(BEANS.Coupon)" class="member-name-link">updateCoupon</a><wbr>(<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&nbsp;coupon)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates an existing coupon in the database.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="connectionPool">
<h3>connectionPool</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">private</span>&nbsp;<span class="return-type"><a href="ConnectionPool.html" title="class in DAO">ConnectionPool</a></span>&nbsp;<span class="element-name">connectionPool</span></div>
</div>
</section>
</li>
<li>
<section class="detail" id="logger">
<h3>logger</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">protected static final</span>&nbsp;<span class="return-type">org.apache.logging.log4j.Logger</span>&nbsp;<span class="element-name">logger</span></div>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>CouponsDBDAO</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">CouponsDBDAO</span>()
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code></dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="addCoupon(BEANS.Coupon)">
<h3>addCoupon</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addCoupon</span><wbr><span class="parameters">(<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&nbsp;coupon)</span>
               throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Adds a new coupon to the database.
 <p>
 This method attempts to insert a new coupon into the `coupons` table. It prepares an SQL `INSERT` statement using
 the provided coupon's details and executes it. If the insertion fails, the method logs an error and throws a
 `CouponException`. If the insertion is successful, the method does not return any value.
 <p>
 The method also handles exceptions that might occur during database access and logs the details of any exceptions
 thrown. It ensures that the database connection is restored to the connection pool, regardless of whether the
 operation succeeded or failed.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="CouponsDAO.html#addCoupon(BEANS.Coupon)">addCoupon</a></code>&nbsp;in interface&nbsp;<code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>coupon</code> - the `Coupon` object to be added to the database.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while adding the coupon to the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="updateCoupon(BEANS.Coupon)">
<h3>updateCoupon</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">updateCoupon</span><wbr><span class="parameters">(<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&nbsp;coupon)</span>
                  throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Updates an existing coupon in the database.
 <p>
 This method attempts to update the details of an existing coupon in the `coupons` table. It prepares an SQL `UPDATE`
 statement using the provided coupon's details and executes it. If the update operation fails, the method logs an
 error and throws a `CouponException`. If the update is successful, the method does not return any value.
 <p>
 The method also handles exceptions that might occur during database access and logs the details of any exceptions
 thrown. It ensures that the database connection is restored to the connection pool, regardless of whether the
 operation succeeded or failed.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="CouponsDAO.html#updateCoupon(BEANS.Coupon)">updateCoupon</a></code>&nbsp;in interface&nbsp;<code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>coupon</code> - the `Coupon` object containing the updated details of the coupon.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while updating the coupon in the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="deleteCoupon(int)">
<h3>deleteCoupon</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteCoupon</span><wbr><span class="parameters">(int&nbsp;couponID)</span>
                  throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Deletes a coupon from the database.
 <p>
 This method attempts to delete a coupon from the `coupons` table based on the provided coupon ID. It prepares
 an SQL `DELETE` statement using the coupon ID and executes it. If the deletion operation fails, the method logs
 an error and throws a `CouponException`. If the deletion is successful, the method does not return any value.
 <p>
 The method also handles exceptions that might occur during database access and logs the details of any exceptions
 thrown. It ensures that the database connection is restored to the connection pool, regardless of whether the
 operation succeeded or failed.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="CouponsDAO.html#deleteCoupon(int)">deleteCoupon</a></code>&nbsp;in interface&nbsp;<code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>couponID</code> - the ID of the coupon to be deleted.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while deleting the coupon from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getAllCoupons()">
<h3>getAllCoupons</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</span>&nbsp;<span class="element-name">getAllCoupons</span>()
                                throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves all coupons from the database.
 <p>
 This method queries the `coupons` table to retrieve all coupon records. It prepares and executes an SQL `SELECT`
 statement to fetch the records, and then processes the result set to create a list of `Coupon` objects. If an
 error occurs during the database operation, it logs the error and throws a `CouponException`. If successful,
 it returns an `ArrayList` containing all coupons.
 <p>
 The method ensures that the database connection is always restored to the connection pool, even if an exception
 occurs or the operation completes successfully.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="CouponsDAO.html#getAllCoupons()">getAllCoupons</a></code>&nbsp;in interface&nbsp;<code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
<dt>Returns:</dt>
<dd>an `ArrayList` of `Coupon` objects representing all coupons in the database.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupons from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="getSelectedCoupon(int)">
<h3>getSelectedCoupon</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a></span>&nbsp;<span class="element-name">getSelectedCoupon</span><wbr><span class="parameters">(int&nbsp;couponID)</span>
                         throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves a specific coupon from the database based on its ID.
 <p>
 This method queries the `coupons` table to retrieve the coupon with the specified ID. It prepares and executes
 an SQL `SELECT` statement to fetch the record, and then processes the result set to create a `Coupon` object.
 If no coupon with the given ID is found, it logs the error and throws a `CouponException`. If successful,
 it returns the `Coupon` object.
 <p>
 The method ensures that the database connection is always restored to the connection pool, even if an exception
 occurs or the operation completes successfully.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="CouponsDAO.html#getSelectedCoupon(int)">getSelectedCoupon</a></code>&nbsp;in interface&nbsp;<code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>couponID</code> - the ID of the coupon to retrieve.</dd>
<dt>Returns:</dt>
<dd>a `Coupon` object representing the coupon with the specified ID.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupon or if the coupon is not found.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="addCouponPurchase(int,int)">
<h3>addCouponPurchase</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">addCouponPurchase</span><wbr><span class="parameters">(int&nbsp;customerId,
 int&nbsp;couponID)</span>
                       throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Records a coupon purchase by a customer and updates the coupon's amount in the database.
 <p>
 This method performs two main actions:
 1. Inserts a record into the `customers_vs_coupons` table to register the purchase.
 2. Updates the `coupons` table to decrement the amount of the purchased coupon.
 <p>
 The method first inserts a new purchase record into the `customers_vs_coupons` table. If this operation is
 successful, it then updates the `coupons` table to decrease the coupon's amount by 1. Both actions are logged.
 If any error occurs during the process, a `CouponException` is thrown.
 <p>
 The method ensures that the database connection is always restored to the pool, even if an exception occurs
 or the operations complete successfully.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="CouponsDAO.html#addCouponPurchase(int,int)">addCouponPurchase</a></code>&nbsp;in interface&nbsp;<code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>customerId</code> - the ID of the customer making the purchase.</dd>
<dd><code>couponID</code> - the ID of the coupon being purchased.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while recording the purchase or updating the coupon's amount.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="deleteCouponPurchase(int,int)">
<h3>deleteCouponPurchase</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteCouponPurchase</span><wbr><span class="parameters">(int&nbsp;customerId,
 int&nbsp;couponID)</span>
                          throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Deletes a coupon purchase record by a customer and updates the coupon's amount in the database.
 <p>
 This method performs two main actions:
 1. Deletes the record of the coupon purchase from the `customers_vs_coupons` table.
 2. Updates the `coupons` table to increment the coupon's amount by 1.
 <p>
 The method first deletes the coupon purchase record from the `customers_vs_coupons` table. If this operation
 is successful, it then updates the `coupons` table to increase the coupon's amount by 1. Both actions are logged.
 If any error occurs during the process, a `CouponException` is thrown.
 <p>
 The method ensures that the database connection is always restored to the pool, even if an exception occurs
 or the operations complete successfully.</div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="CouponsDAO.html#deleteCouponPurchase(int,int)">deleteCouponPurchase</a></code>&nbsp;in interface&nbsp;<code><a href="CouponsDAO.html" title="interface in DAO">CouponsDAO</a></code></dd>
<dt>Parameters:</dt>
<dd><code>customerId</code> - the ID of the customer whose coupon purchase record is to be deleted.</dd>
<dd><code>couponID</code> - the ID of the coupon for which the purchase record is being deleted.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while deleting the purchase record or updating the coupon's amount.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="deletePurchasesByCompany(int)">
<h3>deletePurchasesByCompany</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deletePurchasesByCompany</span><wbr><span class="parameters">(int&nbsp;companyId)</span>
                              throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Deletes all coupon purchase records associated with coupons from a specified company.
 <p>
 This method performs the following actions:
 1. Deletes all records from the `customers_vs_coupons` table where the `coupon_id` matches any ID
    from the `coupons` table that is associated with the given company ID.
 <p>
 If the deletion operation fails, a `CouponException` is thrown. The process is logged for tracking purposes.
 <p>
 The method ensures that the database connection is always restored to the pool, even if an exception occurs
 or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>companyId</code> - the ID of the company whose associated coupon purchases are to be deleted.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while deleting the coupon purchase records.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="deleteCouponsByCompany(int)">
<h3>deleteCouponsByCompany</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteCouponsByCompany</span><wbr><span class="parameters">(int&nbsp;companyId)</span>
                            throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Deletes all coupons associated with a specified company.
 <p>
 This method performs the following actions:
 1. Deletes all records from the `coupons` table where the `company_id` matches the given company ID.
 <p>
 If the deletion operation fails, a `CouponException` is thrown. The process is logged for tracking purposes.
 <p>
 The method ensures that the database connection is always restored to the pool, even if an exception occurs
 or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>companyId</code> - the ID of the company whose associated coupons are to be deleted.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while deleting the coupons.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="deletePurchasesByCustomer(int)">
<h3>deletePurchasesByCustomer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deletePurchasesByCustomer</span><wbr><span class="parameters">(int&nbsp;customerID)</span>
                               throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Deletes all coupon purchases made by a specified customer and updates the coupon amounts accordingly.
 <p>
 This method performs the following actions:
 1. Increases the amount of all coupons that the customer has purchased. This is done by updating the `coupons` table
    to increment the `amount` of each coupon where the `id` is found in the `customers_vs_coupons` table.
 2. Deletes all coupon purchase records for the specified customer from the `customers_vs_coupons` table.
 <p>
 If any operation fails, a `CouponException` is thrown. The process is logged for tracking purposes.
 <p>
 The method ensures that the database connection is always restored to the pool, even if an exception occurs
 or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>customerID</code> - the ID of the customer whose coupon purchases are to be deleted.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while updating coupon amounts or deleting purchase records.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="deletePurchasesByCoupon(int)">
<h3>deletePurchasesByCoupon</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deletePurchasesByCoupon</span><wbr><span class="parameters">(int&nbsp;couponID)</span>
                             throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Deletes all coupon purchases associated with a specified coupon.
 <p>
 This method performs the following action:
 1. Deletes all records from the `customers_vs_coupons` table where the `coupon_id` matches the specified coupon ID.
 <p>
 If the operation fails, a `CouponException` is thrown. The process is logged for tracking purposes.
 <p>
 The method ensures that the database connection is always restored to the pool, even if an exception occurs
 or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>couponID</code> - the ID of the coupon whose purchases are to be deleted.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while deleting the purchase records.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="deleteCouponsByExpirationDate()">
<h3>deleteCouponsByExpirationDate</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">deleteCouponsByExpirationDate</span>()
                                   throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Deletes expired coupons from the database.
 <p>
 This method performs the following actions:
 1. Deletes all records from the `customers_vs_coupons` table where the `coupon_id` corresponds to a coupon with an expiration date less than or equal to the current time.
 2. Deletes all expired coupons from the `coupons` table, where the expiration date is less than or equal to the current time.
 <p>
 If the deletion fails at any step, a `CouponException` is thrown. The process is logged for tracking purposes.
 <p>
 The method ensures that the database connection is always restored to the pool, even if an exception occurs
 or the operation completes successfully.</div>
<dl class="notes">
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while deleting the expired coupons or related purchase records.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allCouponsByCompany(int)">
<h3>allCouponsByCompany</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</span>&nbsp;<span class="element-name">allCouponsByCompany</span><wbr><span class="parameters">(int&nbsp;companyId)</span>
                                      throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves all coupons associated with a specific company from the database.
 <p>
 This method executes a SQL query to select all coupons where the `company_id` matches the given company ID.
 It then iterates over the results and converts each record into a `Coupon` object, which is added to an `ArrayList`.
 <p>
 The method handles exceptions related to SQL operations and restores the database connection to the pool
 even if an exception occurs or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>companyId</code> - the ID of the company whose coupons are to be retrieved.</dd>
<dt>Returns:</dt>
<dd>an `ArrayList` of `Coupon` objects associated with the specified company.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupons from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allCouponsByCompanyAndCategory(int,int)">
<h3>allCouponsByCompanyAndCategory</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</span>&nbsp;<span class="element-name">allCouponsByCompanyAndCategory</span><wbr><span class="parameters">(int&nbsp;companyId,
 int&nbsp;categoryId)</span>
                                                 throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves all coupons for a specific company that belong to a given category.
 <p>
 This method executes a SQL query to select coupons from the `coupons` table where the `company_id` matches the
 specified company ID and the `category_id` matches the given category ID. It iterates over the result set, converts
 each record into a `Coupon` object, and adds it to an `ArrayList`.
 <p>
 The method handles exceptions related to SQL operations and ensures that the database connection is properly
 restored to the pool, even if an exception occurs or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>companyId</code> - the ID of the company whose coupons are to be retrieved.</dd>
<dd><code>categoryId</code> - the ID of the category to filter the coupons by.</dd>
<dt>Returns:</dt>
<dd>an `ArrayList` of `Coupon` objects associated with the specified company and category.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupons from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allCouponsByCompanyAndMaxPrice(int,double)">
<h3>allCouponsByCompanyAndMaxPrice</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</span>&nbsp;<span class="element-name">allCouponsByCompanyAndMaxPrice</span><wbr><span class="parameters">(int&nbsp;companyId,
 double&nbsp;maxPrice)</span>
                                                 throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves all coupons for a specific company that are priced at or below a given maximum price.
 <p>
 This method executes a SQL query to select coupons from the `coupons` table where the `company_id` matches the
 specified company ID and the `price` is less than or equal to the given maximum price. It iterates over the
 result set, converts each record into a `Coupon` object, and adds it to an `ArrayList`.
 <p>
 The method handles exceptions related to SQL operations and ensures that the database connection is properly
 restored to the pool, even if an exception occurs or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>companyId</code> - the ID of the company whose coupons are to be retrieved.</dd>
<dd><code>maxPrice</code> - the maximum price of the coupons to be retrieved.</dd>
<dt>Returns:</dt>
<dd>an `ArrayList` of `Coupon` objects associated with the specified company and within the maximum price.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupons from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allCouponsByCustomer(int)">
<h3>allCouponsByCustomer</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</span>&nbsp;<span class="element-name">allCouponsByCustomer</span><wbr><span class="parameters">(int&nbsp;customerId)</span>
                                       throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves all coupons associated with a specific customer from the database.
 <p>
 This method executes a SQL query to join the `customers_vs_coupons` table with the `coupons` table,
 retrieving all coupons for a given customer ID. It iterates over the results, converts each record into
 a `Coupon` object, and adds it to an `ArrayList`.
 <p>
 The method handles exceptions related to SQL operations and ensures that the database connection is
 properly restored to the pool, even if an exception occurs or the operation completes successfully.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>customerId</code> - the ID of the customer whose coupons are to be retrieved.</dd>
<dt>Returns:</dt>
<dd>an `ArrayList` of `Coupon` objects associated with the specified customer.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupons from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allCouponsByCustomerAndCategory(int,int)">
<h3>allCouponsByCustomerAndCategory</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</span>&nbsp;<span class="element-name">allCouponsByCustomerAndCategory</span><wbr><span class="parameters">(int&nbsp;customerId,
 int&nbsp;categoryId)</span>
                                                  throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves all coupons purchased by a specific customer that belong to a given category.
 <p>
 This method performs a SQL query to select coupons from the `coupons` table that have been purchased by the customer
 (as indicated by the `customers_vs_coupons` table) and that belong to the specified category. It then converts each result
 set row into a `Coupon` object and adds it to an `ArrayList`.
 <p>
 The method ensures that any exceptions related to SQL operations are caught and handled appropriately. It also guarantees
 that the database connection is restored to the pool after use, regardless of whether the operation succeeds or fails.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>customerId</code> - the ID of the customer whose purchased coupons are to be retrieved.</dd>
<dd><code>categoryId</code> - the ID of the category to filter the coupons by.</dd>
<dt>Returns:</dt>
<dd>an `ArrayList` of `Coupon` objects purchased by the customer that belong to the specified category.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupons from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="allCouponsByCustomerAndMaxPrice(int,double)">
<h3>allCouponsByCustomerAndMaxPrice</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.base/java/util/ArrayList.html" title="class or interface in java.util" class="external-link">ArrayList</a>&lt;<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&gt;</span>&nbsp;<span class="element-name">allCouponsByCustomerAndMaxPrice</span><wbr><span class="parameters">(int&nbsp;customerId,
 double&nbsp;maxPrice)</span>
                                                  throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Retrieves all coupons purchased by a specific customer that are priced below or equal to a given maximum price.
 <p>
 This method performs a SQL query to select coupons from the `coupons` table that have been purchased by the customer
 (as indicated by the `customers_vs_coupons` table) and that have a price less than or equal to the specified maximum price.
 It then converts each result set row into a `Coupon` object and adds it to an `ArrayList`.
 <p>
 The method ensures that any exceptions related to SQL operations are caught and handled appropriately. It also guarantees
 that the database connection is restored to the pool after use, regardless of whether the operation succeeds or fails.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>customerId</code> - the ID of the customer whose purchased coupons are to be retrieved.</dd>
<dd><code>maxPrice</code> - the maximum price to filter the coupons by.</dd>
<dt>Returns:</dt>
<dd>an `ArrayList` of `Coupon` objects purchased by the customer that are priced below or equal to the maximum price.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while retrieving the coupons from the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="checkCouponPurchase(int,int)">
<h3>checkCouponPurchase</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">checkCouponPurchase</span><wbr><span class="parameters">(int&nbsp;customerID,
 int&nbsp;couponID)</span>
                            throws <span class="exceptions"><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></span></div>
<div class="block">Checks if a specific coupon has been purchased by a customer.
 <p>
 Returns `false` if no such purchase exists, and `true` if the coupon has been purchased by the customer or if
 the coupon is out of stock or expired.
 <p>
 This method performs two checks:
 1. Verifies if there is a record of the coupon purchase by the customer.
 2. If no purchase record is found, checks if the coupon exists, is in stock, and has not expired.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>customerID</code> - the ID of the customer.</dd>
<dd><code>couponID</code> - the ID of the coupon.</dd>
<dt>Returns:</dt>
<dd>`true` if the coupon has been purchased or is out of stock/expired, `false` if no purchase record exists.</dd>
<dt>Throws:</dt>
<dd><code><a href="../BEANS/CouponException.html" title="class in BEANS">CouponException</a></code> - if an error occurs while querying the database.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="couponToStatement(BEANS.Coupon,java.sql.PreparedStatement)">
<h3>couponToStatement</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">couponToStatement</span><wbr><span class="parameters">(<a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a>&nbsp;coupon,
 <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/PreparedStatement.html" title="class or interface in java.sql" class="external-link">PreparedStatement</a>&nbsp;statement)</span>
                       throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Populates a <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/PreparedStatement.html" title="class or interface in java.sql" class="external-link"><code>PreparedStatement</code></a> with the values from a <a href="../BEANS/Coupon.html" title="class in BEANS"><code>Coupon</code></a> object.
 This method is used to either insert a new coupon or update an existing coupon in the database.
 <p>
 The method sets the parameters for the SQL query based on the type of operation:
 <ul>
     <li>For an INSERT operation: The ID is not set as it is usually auto-generated by the database.</li>
     <li>For an UPDATE operation: The ID is included to specify which record to update.</li>
 </ul>
 <p>
 Parameters are set in the following order:
 <ol>
     <li><b>category_id:</b> The ID of the coupon's category.</li>
     <li><b>title:</b> The title of the coupon.</li>
     <li><b>description:</b> A brief description of the coupon.</li>
     <li><b>start_date:</b> The start date of the coupon's validity.</li>
     <li><b>end_date:</b> The end date of the coupon's validity.</li>
     <li><b>amount:</b> The quantity of the coupon available.</li>
     <li><b>price:</b> The price of the coupon.</li>
     <li><b>image:</b> The URL or path to the image associated with the coupon.</li>
     <li><b>id:</b> The ID of the coupon, set only if it's an UPDATE operation. For INSERT operations, this parameter is not set.</li>
 </ol></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>coupon</code> - The <a href="../BEANS/Coupon.html" title="class in BEANS"><code>Coupon</code></a> object containing the data to be inserted or updated.</dd>
<dd><code>statement</code> - The <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/PreparedStatement.html" title="class or interface in java.sql" class="external-link"><code>PreparedStatement</code></a> object to be populated with the coupon data.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - If an SQL error occurs while setting the parameters.</dd>
</dl>
</div>
</section>
</li>
<li>
<section class="detail" id="resultSetToCoupon(java.sql.ResultSet)">
<h3>resultSetToCoupon</h3>
<div class="horizontal-scroll">
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../BEANS/Coupon.html" title="class in BEANS">Coupon</a></span>&nbsp;<span class="element-name">resultSetToCoupon</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link">ResultSet</a>&nbsp;resultSet)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></span></div>
<div class="block">Converts a <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link"><code>ResultSet</code></a> object into a <a href="../BEANS/Coupon.html" title="class in BEANS"><code>Coupon</code></a> object.
 This method maps the columns of the result set to the properties of the Coupon object.
 <p>
 The method assumes that the result set contains the following columns in the specified order:
 <ol>
     <li><b>id:</b> The unique identifier for the coupon.</li>
     <li><b>companyId:</b> The ID of the company that issued the coupon.</li>
     <li><b>category:</b> The category of the coupon, converted from an integer ID to a <a href="../BEANS/CategoryEnum.html" title="enum class in BEANS"><code>CategoryEnum</code></a>.</li>
     <li><b>title:</b> The title of the coupon.</li>
     <li><b>description:</b> A description of the coupon.</li>
     <li><b>startDate:</b> The start date of the coupon's validity.</li>
     <li><b>endDate:</b> The end date of the coupon's validity.</li>
     <li><b>amount:</b> The quantity of the coupon available.</li>
     <li><b>price:</b> The price of the coupon.</li>
     <li><b>image:</b> The URL or path to the image associated with the coupon.</li>
 </ol></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>resultSet</code> - The <a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/ResultSet.html" title="class or interface in java.sql" class="external-link"><code>ResultSet</code></a> object containing the coupon data from the database.</dd>
<dt>Returns:</dt>
<dd>A <a href="../BEANS/Coupon.html" title="class in BEANS"><code>Coupon</code></a> object populated with data from the result set.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/22/docs/api/java.sql/java/sql/SQLException.html" title="class or interface in java.sql" class="external-link">SQLException</a></code> - If an SQL error occurs while accessing the result set.</dd>
</dl>
</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</body>
</html>
